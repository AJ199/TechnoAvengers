@page
@model ContosoCrafts.WebSite.Pages.Product.CreateModel
@{
    ViewData["Title"] = "Create";
}

<!-- Back Button -->
<div>
    <a href="@Url.Page("/Product/Index")" class="btn btn-primary">
        ← Back to Superheroes
    </a>
</div>

<div class="create-form-container">
    <h2>Create New Hero</h2>
    <p><strong>Fields marked with (<span class="text-danger">*</span>) are required</strong></p>

    <form method="post">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <!-- Title -->
        <div class="create-form-group">
            <label asp-for="Product.Title">Superhero Name (<span class="text-danger">*</span>)</label>
            <span asp-validation-for="Product.Title"></span>
            <input asp-for="Product.Title" />
        </div>

        <!-- Fullname -->
        <div class="create-form-group">
            <label asp-for="Product.Fullname">Fullname (Optional)</label>
            <span asp-validation-for="Product.Fullname"></span>
            <input asp-for="Product.Fullname" />
        </div>

        <!-- Gender Dropdown -->
        <div class="create-form-group">
            <label asp-for="Product.Gender">Gender (<span class="text-danger">*</span>)</label>
            <span asp-validation-for="Product.Gender"></span>
            <select asp-for="Product.Gender" class="form-control">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
        </div>

        <!-- Role Dropdown -->
        <div class="create-form-group">
            <label asp-for="Product.Role">Role (<span class="text-danger">*</span>)</label>
            <span asp-validation-for="Product.Role"></span>
            <select asp-for="Product.Role" class="form-control">
                <option value="Core Avenger">Core Avenger</option>
                <option value="Founding Avenger">Founding Avenger</option>
                <option value="Guardian">Guardian</option>
                <option value="Support">Support</option>
                <option value="Mystic Defender">Mystic Defender</option>
            </select>
        </div>

        <!-- Alignment Dropdown -->
        <div class="create-form-group">
            <label asp-for="Product.Alignment">Alignment (<span class="text-danger">*</span>)</label>
            <span asp-validation-for="Product.Alignment"></span>
            <select asp-for="Product.Alignment" class="form-control">
                <option value="good">Good</option>
                <option value="bad">Bad</option>
                <option value="neutral">Neutral</option>
            </select>
        </div>

        <!-- Birthplace -->
        <div class="create-form-group">
            <label asp-for="Product.Birthplace">Birthplace (Optional)</label>
            <span asp-validation-for="Product.Birthplace"></span>
            <input asp-for="Product.Birthplace" />
        </div>

        <!-- Work -->
        <div class="create-form-group">
            <label asp-for="Product.Work">Work (Optional)</label>
            <span asp-validation-for="Product.Work"></span>
            <input asp-for="Product.Work" />
        </div>

        <!-- First Appearance -->
        <div class="create-form-group">
            <label asp-for="Product.FirstAppear">First Appearance (Optional)</label>
            <span asp-validation-for="Product.FirstAppear"></span>
            <input asp-for="Product.FirstAppear" />
        </div>

        <!-- Image URL -->
        <div class="create-form-group">
            <label asp-for="Product.ImageUrl">Image URL (<span class="text-danger">*</span>)</label>
            <span asp-validation-for="Product.ImageUrl"></span>
            <input asp-for="Product.ImageUrl" />
        </div>

        <!-- Powerstats Sliders -->
        <h3>Powerstats</h3>

        <!-- Intelligence -->
        <div class="create-form-group">
            <label asp-for="Product.Intelligence">Intelligence (<span class="text-danger">*</span>)</label>
            <div class="create-slider-container">
                <input asp-for="Product.Intelligence"
                       type="range"
                       min="1"
                       max="100"
                       class="slider" />
                <span class="create-slider-values" id="Intelligence-value">0</span>
            </div>
        </div>

        <!-- Strength -->
        <div class="create-form-group">
            <label asp-for="Product.Strength">Strength (<span class="text-danger">*</span>)</label>
            <div class="create-slider-container">
                <input asp-for="Product.Strength"
                       type="range"
                       min="1"
                       max="100"
                       class="slider" />
                <span class="create-slider-values" id="Strength-value">0</span>
            </div>
        </div>

        <!-- Speed -->
        <div class="create-form-group">
            <label asp-for="Product.Speed">Speed (<span class="text-danger">*</span>)</label>
            <div class="create-slider-container">
                <input asp-for="Product.Speed"
                       type="range"
                       min="1"
                       max="100"
                       class="slider" />
                <out class="create-slider-values" id="Speed-value">0</out>
            </div>
        </div>

        <!-- Durability -->
        <div class="create-form-group">
            <label asp-for="Product.Durability">Durability (<span class="text-danger">*</span>)</label>
            <div class="create-slider-container">
                <input asp-for="Product.Durability"
                       type="range"
                       min="1"
                       max="100"
                       class="slider" />
                <output class="create-slider-values" id="Durability-value">0</output>
            </div>
        </div>

        <!-- Power -->
        <div class="create-form-group">
            <label asp-for="Product.Power">Power (<span class="text-danger">*</span>)</label>
            <div class="create-slider-container">
                <input asp-for="Product.Power"
                       type="range"
                       min="1"
                       max="100"
                       class="slider" />
                <output class="create-slider-values" id="Power-value">0</output>
            </div>
        </div>

        <!-- Combat -->
        <div class="create-form-group">
            <label asp-for="Product.Combat">Combat (<span class="text-danger">*</span>)</label>
            <div class="create-slider-container">
                <input asp-for="Product.Combat"
                       type="range"
                       min="1"
                       max="100"
                       class="slider" />
                <output class="create-slider-values" id="Combat-value">0</output>
            </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="create-btn-submit">Create</button>
    </form>
</div>

<script>
    /// <summary>
    ///  Initializes all slider controls once the DOM is fully loaded.
    /// </summary>
    function onDomReady()
    {
        // Collection of all slider input elements on the page
        var sliders = document.querySelectorAll('.slider');

        // Iterate through each slider and set it up
        for (var i = 0; i < sliders.length; i++)
        {
            setupSlider(sliders[i]);
        }
    }

    // Listen for DOMContentLoaded and invoke onDomReady
    document.addEventListener('DOMContentLoaded', onDomReady);

    /// <summary>
    /// Initializes and hooks up a single slider’s display.
    /// </summary>
    /// <param name="slider">The slider element.</param>
    function setupSlider(slider)
    {
        // Container wrapping this slider
        var container = slider.closest('.create-slider-container');

        // Span showing this slider’s numeric value
        var display = container.querySelector('.create-slider-values');

        // Set initial display
        display.textContent = slider.value;

        // Update display on input
        slider.addEventListener('input', function onSliderInput()
        {
            display.textContent = slider.value;
        });
    }
</script>