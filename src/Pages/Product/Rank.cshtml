@page
@model ContosoCrafts.WebSite.Pages.Product.RankModel

@{
    // Set the page title for the layout
    ViewData["Title"] = "Superhero Rankings";
}

<!-- Main container for the Rank page content -->
<div class="rank-page-container" style="background-color: rgba(0, 0, 0, 0.7); padding: 30px; border-radius: 12px; margin: 40px auto; max-width: 900px;">

    <!-- Page Heading -->
    <h2 class="text-center" style="color: #ffcc00; font-family: 'Bangers', cursive; font-size: 3rem; text-shadow: 2px 2px 8px black; margin-bottom: 30px;">
        Superhero Rankings
    </h2>

    <!-- Table displaying superhero rankings -->
    <table class="table table-hover table-bordered" style="color: white; background-color: rgba(0, 0, 0, 0.6); border-radius: 8px; overflow: hidden;">
        <thead style="background-color: rgba(255, 0, 0, 0.7); font-family: 'Bangers', cursive; font-size: 1.3rem;">
            <tr>
                <th>Superhero</th>
                <th>Score</th>
                <th>Rank</th>
                <th>Role</th>
            </tr>
        </thead>
        <tbody>
            <!-- Loop through all superheroes and display their details -->
            @foreach (var hero in Model.Superheroes.OrderByDescending(h => h.Score))
            {
                <tr style="background-color: rgba(0, 0, 0, 0.5); font-family: 'Nunito', sans-serif; font-size: 1.2rem;">
                    <td>@hero.Title</td>
                    <td>@hero.Score</td>
                    <td>@hero.Rank</td>
                    <td>@hero.Role</td>
                </tr>
            }
        </tbody>
    </table>

    <!-- Download PDF Button at the bottom -->
    <div class="text-center mt-4">
        <button onclick="window.print()" class="btn btn-danger" style="font-family: 'Bangers', cursive; font-size: 1.2rem; padding: 10px 20px; border-radius: 8px;">
            <i class="fas fa-file-pdf"></i> Download PDF
        </button>
    </div>

    <!-- Poll Section -->
    <hr />
    <div class="poll-container text-center mt-5">
        <h4 class="poll-heading">Do you agree with the superhero rankings?</h4>
        <form method="post" class="poll-buttons d-flex flex-column align-items-center @(Model.HasVoted ? "voted" : "")">
            <button type="submit" name="pollResponse" value="yes" class="btn btn-poll-yes m-2">
                Yes, I agree!
            </button>
            <button type="submit" name="pollResponse" value="no" class="btn btn-poll-no m-2">
                No, I disagree!
            </button>
        </form>

        <div class="poll-bar-container">
            <h5 class="poll-bar-title">Poll Results:</h5>
            <div class="poll-bar poll-bar-yes" style="width: @Model.YesPercentage%">
                <span class="poll-bar-text">AGREE (@Model.YesPercentage%)</span>
            </div>
            <div class="poll-bar poll-bar-no" style="width: @Model.NoPercentage%">
                <span class="poll-bar-text">DISAGREE (@Model.NoPercentage%)</span>
            </div>
        </div>
    </div>
</div>
