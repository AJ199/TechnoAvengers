@page "{hero1Id}/{hero2Id}"
@model ContosoCrafts.WebSite.Pages.Product.CompareResultModel
@using Microsoft.AspNetCore.Html

@{
    ViewData["Title"] = "Superhero Showdown";
    bool IsHigher(int a, int b) => a > b;
    bool IsEqual(int a, int b) => a == b;
}

<!-- Back to Superheroes Button -->
<div class="text-start mb-3 ms-4">
    <a class="btn btn-primary px-4 py-2" style="font-family: 'Bangers', cursive; font-size: 1.1rem;" asp-page="/Product/Index">
        ← BACK TO SUPERHEROES
    </a>
</div>

<div class="showdown-wrapper">
    <h1 class="showdown-title">SUPERHERO SHOWDOWN</h1>

    <div class="container text-center">
        <div class="row justify-content-center align-items-start gap-4">

            <!-- Hero 1 -->
            <div class="col-md-5 hero-card">
                <img src="@Model.Hero1.ImageUrl" alt="@Model.Hero1.Title" class="hero-img" />
                <h2 class="hero-name">@Model.Hero1.Title</h2>
                <div class="stats-box">
                    @DisplayStat("Power", Model.Hero1.Power, Model.Hero2.Power)
                    @DisplayStat("Speed", Model.Hero1.Speed, Model.Hero2.Speed)
                    @DisplayStat("Strength", Model.Hero1.Strength, Model.Hero2.Strength)
                    @DisplayStat("Intelligence", Model.Hero1.Intelligence, Model.Hero2.Intelligence)
                    @DisplayStat("Durability", Model.Hero1.Durability, Model.Hero2.Durability)
                    @DisplayStat("Combat", Model.Hero1.Combat, Model.Hero2.Combat)
                </div>
            </div>

            <!-- Hero 2 -->
            <div class="col-md-5 hero-card">
                <img src="@Model.Hero2.ImageUrl" alt="@Model.Hero2.Title" class="hero-img" />
                <h2 class="hero-name">@Model.Hero2.Title</h2>
                <div class="stats-box">
                    @DisplayStat("Power", Model.Hero2.Power, Model.Hero1.Power)
                    @DisplayStat("Speed", Model.Hero2.Speed, Model.Hero1.Speed)
                    @DisplayStat("Strength", Model.Hero2.Strength, Model.Hero1.Strength)
                    @DisplayStat("Intelligence", Model.Hero2.Intelligence, Model.Hero1.Intelligence)
                    @DisplayStat("Durability", Model.Hero2.Durability, Model.Hero1.Durability)
                    @DisplayStat("Combat", Model.Hero2.Combat, Model.Hero1.Combat)
                </div>
            </div>

        </div>
    </div>
</div>

@functions {
    public IHtmlContent DisplayStat(string label, int value, int opponent)
    {
        var isHigher = value > opponent;
        var isEqual = value == opponent;
        var css = isHigher ? "stat-row highlight-glow" : "stat-row";
        var icon = isHigher ? " 🏆" : (isEqual ? " ⚔️" : "");

        return new HtmlString($"<div class='{css}'><span>{label}</span><span>{value}{icon}</span></div>");
    }
}
